{"version":3,"sources":["ElectionCard.jsx","CandidateCards.jsx","TextField.jsx","CandidateDialog.jsx","ElectionDetails.jsx","ElectionDialog.jsx","AddElectionCard.jsx","Elections.jsx","Authorization.jsx","LoadingIndicator.jsx","ErrorPopup.jsx","App.js","index.js","config.js"],"names":["Leaderboard","candidate","className","name","votes","length","ElectionCard","election","index","delay","contract","onLoading","currentUser","nearConfig","wallet","onElectionSelected","useState","isShowing","setIsShowing","isHovered","setIsHovered","setVotes","candidates","setCandidates","useEffect","get_votes","electionId","id","then","err","creationDate","toDate","startDate","endDate","useTimeoutFn","resetIsShowing","as","Fragment","show","enter","enterFrom","enterTo","leave","leaveFrom","leaveTo","onClick","onMouseEnter","onMouseLeave","title","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","description","formatDate","sort","c1","c2","map","c","CandidateDetails","checked","active","candidateVotes","setCandidateVotes","filter","v","accountId","forEach","Label","AccountIcon","Description","fillRule","clipRule","slogan","goals","vote","CheckIcon","VoteCard","props","cx","cy","r","opacity","CandidateCards","onCandidateSelected","selected","setSelected","value","onChange","Option","TextField","label","lines","onValueChange","isDate","htmlFor","date","rows","type","CandidateDialog","onClose","onCandidateAdded","onError","candidateName","setCandidateName","candidateSlogan","setCandidateSlogan","candidateGoals","setCandidateGoals","appear","Child","Overlay","aria-hidden","Title","e","target","add_candidacy","kind","disabled","ElectionDetails","closeButtonColor","setCloseButtonColor","shouldReloadCandidates","setShouldReloadCandidates","shouldReloadVotes","setShouldReloadVotes","showCandidateDialog","setShowCandidateDialog","isGodMode","setIsGodeMode","isUserVoted","setIsUserVoted","isUserApplied","setIsUserApplied","selectedCandidate","setSelectedCandidate","get_god_mode","mode","get_candidates","moment","add_vote","candidateId","comment","ElectionDialog","onElectionAdded","electionTitle","setElectionTitle","electionDescription","setElectionDescription","add","startOf","electionStartDate","setElectionStartDate","endOf","electionEndDate","setElectionEndDate","add_election","format","console","log","AddElectionCard","showAddNewElection","timestamp","Math","floor","toFixed","Elections","elections","setElections","shouldReloadElections","setShouldReloadElections","selectedElection","setSelectedElection","showElectionDialog","setShowElectionDialog","activateElection","localStorage","setItem","getItem","get_elections","e1","e2","removeItem","GodModeToggle","enabled","setEnabled","isEnabled","god_mode_on","god_mode_off","Authorization","src","alt","signOut","window","location","replace","origin","pathname","requestSignIn","contractName","LoadingIndicator","isLoading","ErrorPopup","error","callback","closeModal","App","setIsLoading","setError","a","getConfig","process","nearAPI","deps","keyStore","BrowserLocalStorageKeyStore","near","walletConnection","getAccountId","account","state","amount","balance","viewMethods","changeMethods","sender","nearInitPromise","initContract","ReactDOM","render","document","getElementById","CONTRACT_NAME","module","exports","env","networkId","nodeUrl","walletUrl","helperUrl","Error"],"mappings":"uVAmKMA,EAAc,SAAC,GAAmB,IAAjBC,EAAgB,EAAhBA,UACrB,OACE,qBAAKC,UAAU,OAAf,SACE,gCACGD,EAAUA,UAAUE,KADvB,KAC+BF,EAAUG,MAAMC,OAD/C,UAOSC,EAxKM,SAAC,GAUf,IATLC,EASI,EATJA,SACAC,EAQI,EARJA,MACAC,EAOI,EAPJA,MACAC,EAMI,EANJA,SAIAC,GAEI,EALJC,YAKI,EAJJC,WAII,EAHJC,OAGI,EAFJH,WACAI,EACI,EADJA,mBACI,EAC4BC,oBAAS,GADrC,mBACCC,EADD,KACYC,EADZ,OAE4BF,oBAAS,GAFrC,mBAECG,EAFD,KAEYC,EAFZ,OAGsBJ,qBAHtB,mBAGGZ,EAHH,KAGUiB,EAHV,OAIgCL,mBAAS,IAJzC,mBAIGM,EAJH,KAIeC,EAJf,KAMJC,qBAAU,WACJb,IACFA,GAAU,GACVD,EAASe,UAAU,CAAEC,WAAYnB,EAASoB,KAAMC,MAC9C,SAACxB,GACCO,GAAU,GACVU,EAASjB,MAEX,SAACyB,GACClB,GAAU,SAIf,CAACD,EAAUH,EAASoB,GAAIhB,IAE3Ba,qBAAU,WACJpB,GAASA,EAAMA,OAASA,EAAMA,MAAMC,OAAS,EAC/CkB,EAAcnB,EAAMA,OAEpBmB,EAAc,MAEf,CAACnB,IAEJ,IAAM0B,EAAeC,EAAOxB,EAASuB,cAC/BE,EAAYD,EAAOxB,EAASyB,WAC5BC,EAAUF,EAAOxB,EAAS0B,SA/B5B,EAiCuBC,aACzB,kBAAMhB,GAAa,KACX,IAARV,GAFO2B,EAjCL,oBA0CJ,OAJAX,qBAAU,WACRW,MACC,CAACA,IAGF,cAAC,IAAD,CACEC,GAAIC,WACJC,KAAMrB,EACNsB,MAAK,yCAAoC9B,EAApC,OACL+B,UAAU,sCACVC,QAAQ,iCACRC,MAAM,gDACNC,UAAU,kCACVC,QAAQ,sBARV,SAUE,sBACEC,QAAS,kBAAM9B,EAAmBR,IAClCuC,aAAc,kBAAM1B,GAAa,IACjC2B,aAAc,kBAAM3B,GAAa,IACjClB,UAAS,kCACPiB,EACI,6BACA,6BAHG,gGAJX,UAUE,qBAAKjB,UAAU,6CAAf,SACGK,EAASyC,QAEZ,sBAAK9C,UAAU,uEAAf,UACE,qBACE+C,MAAM,6BACN/C,UAAU,eACVgD,KAAK,OACLC,QAAQ,YACRC,OAAO,eALT,SAOE,sBACEC,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,2HAGLjD,EAASkD,eAEZ,sBAAKvD,UAAU,iEAAf,UACE,qBACE+C,MAAM,6BACN/C,UAAU,eACVgD,KAAK,OACLC,QAAQ,YACRC,OAAO,eALT,SAOE,sBACEC,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,kDAGN,0CAAaE,EAAW5B,SAE1B,sBAAK5B,UAAU,iEAAf,UACE,qBACE+C,MAAM,6BACN/C,UAAU,eACVgD,KAAK,OACLC,QAAQ,YACRC,OAAO,eALT,SAOE,sBACEC,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,6FAGLE,EAAW1B,GAfd,MAe6B0B,EAAWzB,MAExC,sBAAK/B,UAAU,iEAAf,UACGoB,GACuB,IAAtBA,EAAWjB,QACX,0CACDiB,GACCA,EAAWjB,OAAS,GADrB,UAEIiB,EAAWjB,OAFf,4BAIH,qBAAKH,UAAU,iEAAf,SACGoB,GAAcA,EAAWjB,OAAS,GACjC,+CAEGiB,EACEqC,MAAK,SAACC,EAAIC,GAAL,OACJD,EAAGxD,MAAMC,SAAWwD,EAAGzD,MAAMC,OACzB,EACAuD,EAAGxD,MAAMC,OAASwD,EAAGzD,MAAMC,QAC1B,EACD,KAELyD,KAAI,SAACC,EAAGvD,GACP,OAAO,cAAC,EAAD,CAAyBP,UAAW8D,GAAlBvD,iB,SCzFrCwD,EAAmB,SAAC,GAAsD,IAApD/D,EAAmD,EAAnDA,UAAWG,EAAwC,EAAxCA,MAAe6D,GAAyB,EAAjCC,OAAiC,EAAzBD,SAAyB,KAAhBtD,UACjBK,mBAAS,KADwB,mBACtEmD,EADsE,KACtDC,EADsD,KAa7E,OAVA5C,qBAAU,WACJvB,GAAaG,GAASA,EAAMA,OAC9BA,EAAMA,MACHiE,QAAO,SAACC,GAAD,OAAOA,EAAErE,UAAUsE,YAActE,EAAUsE,aAClDC,SAAQ,SAACF,GACRF,EAAkBE,EAAElE,YAGzB,CAACA,EAAOH,IAGT,sBAAKC,UAAU,2CAAf,UACE,qBAAKA,UAAU,0BAAf,SACE,sBAAKA,UAAU,UAAf,UACE,eAAC,IAAWuE,MAAZ,CACErC,GAAG,MACHlC,UAAS,wCACP+D,EAAU,aAAe,iBAH7B,UAME,cAACS,EAAD,IACA,mBAAGxE,UAAU,YAAb,SAA0BD,EAAUsE,eAEtC,eAAC,IAAWI,YAAZ,CACEvC,GAAG,OACHlC,UAAS,qBACP+D,EAAU,4BAA8B,iBAH5C,UAME,sBAAK/D,UAAU,OAAf,UACE,qBACE+C,MAAM,6BACN/C,UAAU,yBACVgD,KAAK,OACLC,QAAQ,YACRC,OAAO,eALT,SAOE,sBACEC,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,0EAGN,mBAAGtD,UAAU,YAAb,SAA0BD,EAAUE,UAEtC,sBAAKD,UAAU,OAAf,UACE,qBACE+C,MAAM,6BACN/C,UAAU,0BACViD,QAAQ,YACRD,KAAK,eAJP,SAME,sBACE0B,SAAS,UACTpB,EAAE,wIACFqB,SAAS,cAGb,mBAAG3E,UAAU,YAAb,SAA0BD,EAAU6E,YAEtC,sBAAK5E,UAAU,OAAf,UACE,qBACE+C,MAAM,6BACN/C,UAAU,yBACVgD,KAAK,OACLC,QAAQ,YACRC,OAAO,eALT,SAOE,sBACEC,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,2HAGN,mBAAGtD,UAAU,YAAb,SAA0BD,EAAU8E,mBAK5C,sBAAK7E,UAAU,2BAAf,UACE,8BACGiE,GAAkBA,EAAe9D,OAAS,EAA1C,iBACa8D,EAAe9D,OAD5B,MAEG,iBAEL8D,GACCA,EAAeL,KAAI,SAACkB,EAAMxE,GAAP,OACjB,cAAC,EAAD,CAAsBwE,KAAMA,GAAbxE,SAGrB,qBAAKN,UAAU,2BAAf,SACG+D,GAAW,cAACgB,EAAD,CAAW/E,UAAU,kBAMnCgF,EAAW,SAAC,GAAc,IAAZF,EAAW,EAAXA,KAClB,OACE,8BACE,sBAAK9E,UAAU,OAAf,UACE,8BACE,cAACwE,EAAD,MAEF,8BAAMM,EAAKT,kBAMnB,SAASG,EAAYS,GACnB,OACE,6CACElC,MAAM,6BACN/C,UAAU,yBACVgD,KAAK,OACLC,QAAQ,YACRC,OAAO,gBACH+B,GANN,aAQE,sBACE9B,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,qHAMV,SAASyB,EAAUE,GACjB,OACE,8CAAKhC,QAAQ,YAAYD,KAAK,QAAWiC,GAAzC,cACE,wBAAQC,GAAI,GAAIC,GAAI,GAAIC,EAAG,GAAIpC,KAAK,OAAOqC,QAAQ,QACnD,sBACE/B,EAAE,gBACFJ,OAAO,OACPG,YAAa,IACbF,cAAc,QACdC,eAAe,cAMRkC,MAnNQ,SAAC,GAUlB,EATJjF,SASK,IARLe,EAQI,EARJA,WACAlB,EAOI,EAPJA,MAKAqF,GAEI,EANJ/E,SAMI,EALJE,YAKI,EAJJC,WAII,EAHJC,OAGI,EAFJ2E,qBACA9E,EACI,EADJA,UACI,EAC4BK,qBAD5B,mBACG0E,EADH,KACaC,EADb,KAGJ,OACE,mCACE,qBAAKzF,UAAU,SAAf,SACE,eAAC,IAAD,CACE0F,MAAOF,EACPG,SAAU,SAAC9B,GACT4B,EAAY5B,GACZ0B,EAAoB1B,IAJxB,UAOE,cAAC,IAAWU,MAAZ,CAAkBvE,UAAU,UAA5B,uBACA,qBAAKA,UAAU,gCAAf,SACGoB,EAAWwC,KAAI,SAAC7D,EAAWO,GAAZ,OACd,cAAC,IAAWsF,OAAZ,CAEEF,MAAO3F,EAAUsE,UACjBrE,UAAW,gBAAGgE,EAAH,EAAGA,OAAQD,EAAX,EAAWA,QAAX,gBAEPC,EACI,sEACA,GAJG,mCAOHD,EACI,mDACA,WATD,gIAHb,SAiBG,gBAAGC,EAAH,EAAGA,OAAQD,EAAX,EAAWA,QAAX,OACC,cAAC,EAAD,CACEhE,UAAWA,EACXG,MAAOA,EACP8D,OAAQA,EACRD,QAASA,EACTtD,UAAWA,MAtBVH,gB,0BCSNuF,EArCG,SAAC,GAAoD,IAAlDC,EAAiD,EAAjDA,MAAOJ,EAA0C,EAA1CA,MAAOK,EAAmC,EAAnCA,MAAOC,EAA4B,EAA5BA,cAAeC,EAAa,EAAbA,OACvD,OACE,sBAAKjG,UAAU,yCAAf,UACE,uBACEkG,QAASJ,EACT9F,UAAU,sDAFZ,SAIG8F,IAEFG,EACC,cAAC,IAAD,CACEjG,UAAU,+GACV0F,MAAOA,EACPC,SAAU,SAACQ,GAAD,OAAUH,EAAcG,MAElCJ,EACF,0BACE/F,UAAU,+GACVC,KAAM6F,EACNrE,GAAIqE,EACJM,KAAML,EACNJ,SAAUK,IAGZ,uBACEK,KAAK,OACLpG,KAAM6F,EACNrE,GAAIqE,EACJ9F,UAAU,+GACV0F,MAAOA,EACPC,SAAUK,QC5BL,SAASM,EAAT,GAUX,IATFC,EASC,EATDA,QACAlG,EAQC,EARDA,SACAG,EAOC,EAPDA,SAIAgG,GAGC,EAND9F,YAMC,EALDC,WAKC,EAJDC,OAIC,EAHD4F,kBACA/F,EAEC,EAFDA,UACAgG,EACC,EADDA,QACC,EACyC3F,mBAAS,IADlD,mBACM4F,EADN,KACqBC,EADrB,OAE6C7F,mBAAS,IAFtD,mBAEM8F,EAFN,KAEuBC,EAFvB,OAG2C/F,mBAAS,YAHpD,mBAGMgG,EAHN,KAGsBC,EAHtB,KAoCD,OACE,mCACE,cAAC,IAAD,CAAYC,QAAM,EAAC5E,MAAM,EAAMF,GAAIC,WAAnC,SACE,cAAC,IAAD,CACED,GAAG,MACHlC,UAAU,qCACVuG,QAASA,EAHX,SAKE,sBAAKvG,UAAU,gCAAf,UACE,cAAC,IAAWiH,MAAZ,CACE/E,GAAIC,WACJE,MAAM,wBACNC,UAAU,YACVC,QAAQ,cACRC,MAAM,uBACNC,UAAU,cACVC,QAAQ,YAPV,SASE,cAAC,IAAOwE,QAAR,CAAgBlH,UAAU,oBAG5B,sBACEA,UAAU,qCACVmH,cAAY,OAFd,oBAMA,cAAC,IAAWF,MAAZ,CACE/E,GAAIC,WACJE,MAAM,wBACNC,UAAU,qBACVC,QAAQ,wBACRC,MAAM,uBACNC,UAAU,wBACVC,QAAQ,qBAPV,SASE,sBAAK1C,UAAU,gJAAf,UACE,cAAC,IAAOoH,MAAR,CACElF,GAAG,KACHlC,UAAU,8CAFZ,oCAMA,cAAC,EAAD,CACE8F,MAAM,OACNJ,MAAOgB,EACPV,cAAe,SAACqB,GAAD,OAAOV,EAAiBU,EAAEC,OAAO5B,UAElD,cAAC,EAAD,CACEI,MAAM,SACNJ,MAAOkB,EACPZ,cAAe,SAACqB,GAAD,OAAOR,EAAmBQ,EAAEC,OAAO5B,UAEpD,cAAC,EAAD,CACEI,MAAM,QACNJ,MAAOoB,EACPf,MAAO,EACPC,cAAe,SAACqB,GAAD,OAAON,EAAkBM,EAAEC,OAAO5B,UAEnD,sBAAK1F,UAAU,4BAAf,UACE,wBACEqG,KAAK,SACLrG,UAAU,0OACV2C,QAAS4D,EAHX,oBAOA,wBACEF,KAAK,SACLrG,UAAU,gQACV2C,QArGG,WACflC,IACFA,GAAU,GACVD,EACG+G,cAAc,CACb/F,WAAYnB,EAASoB,GACrBxB,KAAMyG,EACN9B,OAAQgC,EACR/B,MAAOiC,IAERpF,MACC,WACEjB,GAAU,GACV+F,OAEF,SAAC7E,GACClB,GAAU,GACVgG,EAAQ,GAAD,OAAI9E,EAAI6F,KAAJ,sBAqFHC,WA7Edf,EAAcvG,OAAS,GACvByG,EAAgBzG,OAAS,GACzB2G,EAAe3G,OAAS,GAuEZ,qCC7GlB,IAoReuH,EApRS,SAAC,GASlB,IARLrH,EAQI,EARJA,SACAG,EAOI,EAPJA,SACAE,EAMI,EANJA,YACAC,EAKI,EALJA,WACAC,EAII,EAJJA,OACA2F,EAGI,EAHJA,QACA9F,EAEI,EAFJA,UACAgG,EACI,EADJA,QACI,EAC8B3F,oBAAS,GADvC,mBACGC,EADH,KACcC,EADd,OAE4CF,mBAAS,QAFrD,mBAEG6G,EAFH,KAEqBC,EAFrB,OAGgC9G,mBAAS,IAHzC,mBAGGM,EAHH,KAGeC,EAHf,OAIsBP,mBAAS,IAJ/B,mBAIGZ,EAJH,KAIUiB,EAJV,OAKwDL,oBAAS,GALjE,mBAKG+G,EALH,KAK2BC,EAL3B,OAM8ChH,oBAAS,GANvD,mBAMGiH,EANH,KAMsBC,EANtB,OAOkDlH,oBAAS,GAP3D,mBAOGmH,EAPH,KAOwBC,EAPxB,KASEtG,EAAeC,EAAOxB,EAASuB,cAC/BE,EAAYD,EAAOxB,EAASyB,WAC5BC,EAAUF,EAAOxB,EAAS0B,SAX5B,EAYuBC,aAAa,kBAAMhB,GAAa,KAAO,KAAzDiB,EAZL,sBAc+BnB,oBAAS,GAdxC,mBAcGqH,GAdH,KAccC,GAdd,QAekCtH,oBAAS,GAf3C,qBAeGuH,GAfH,MAegBC,GAfhB,SAgBsCxH,oBAAS,GAhB/C,qBAgBGyH,GAhBH,MAgBkBC,GAhBlB,SAiB8C1H,qBAjB9C,qBAiBG2H,GAjBH,MAiBsBC,GAjBtB,MAmBJpH,qBAAU,WACJZ,GACFF,EACGmI,aAAa,CAAEtE,UAAW3D,EAAY2D,YACtC3C,MAAK,SAACkH,GACLR,GAAcQ,QAGnB,CAACT,GAAW3H,EAAUE,IAEzBY,qBAAU,WACJZ,GAAeA,EAAY2D,WAAajD,GAC1CA,EACG+C,QAAO,SAACN,GAAD,OAAOA,EAAEQ,YAAc3D,EAAY2D,aAC1CC,SAAQ,kBAAMkE,IAAiB,QAEnC,CAAChI,EAAUY,EAAYV,IAE1BY,qBAAU,WACJZ,GAAeA,EAAY2D,WAAanE,GAASA,EAAMA,OACzDA,EAAMA,MAAMoE,SAAQ,SAACT,GACnBA,EAAE3D,MACCiE,QAAO,SAACC,GAAD,OAAOA,EAAEC,YAAc3D,EAAY2D,aAC1CC,SAAQ,SAACF,GAAD,OAAOkE,IAAe,WAGpC,CAAC9H,EAAUN,EAAOQ,IAErBY,qBAAU,WACJb,IACFA,GAAU,GACVD,EAASqI,eAAe,CAAErH,WAAYnB,EAASoB,KAAMC,MACnD,SAACN,GACCX,GAAU,GACVY,EAAcD,MAEhB,SAACO,GACClB,GAAU,SAIf,CAACD,EAAUH,EAASoB,GAAIoG,EAAwBpH,IAMnDa,qBAAU,WACJb,IACFA,GAAU,GACVD,EAASe,UAAU,CAAEC,WAAYnB,EAASoB,KAAMC,MAC9C,SAACxB,GACCO,GAAU,GACVuH,GAAqB,GACrB7G,EAASjB,MAEX,SAACyB,GACClB,GAAU,SAIf,CAACD,EAAUH,EAASoB,GAAIhB,EAAWsH,IA4BtC,OAJAzG,qBAAU,WACRW,MACC,CAACA,IAGF,cAAC,IAAD,CACEC,GAAIC,WACJC,KAAMrB,EACNsB,MAAK,wCACLC,UAAU,sCACVC,QAAQ,iCACRC,MAAM,gDACNC,UAAU,kCACVC,QAAQ,sBARV,SAUE,sBAAK1C,UAAU,yGAAf,UACE,sBAAKA,UAAU,8DAAf,UACE,wBACE2C,QAAS,kBAAMuF,GAAuB,IACtCT,YA5DAc,KAAkBJ,IAAarG,EAAYgH,QA6D3C9I,UAAU,+GAHZ,SAKE,qBACE+C,MAAM,6BACN/C,UAAU,UACVgD,KAAK,OACLC,QAAQ,YACRC,OAAO,eALT,SAOE,sBACEC,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,6FAIR,qBAAKtD,UAAU,mDAAf,SACGK,EAASyC,QAEZ,wBACE9C,UAAU,eACV2C,QAAS4D,EACT3D,aAAc,kBAAMgF,EAAoB,SACxC/E,aAAc,kBAAM+E,EAAoB,SAJ1C,SAME,qBACE7E,MAAM,6BACN/C,UAAU,UACVgD,KAAK,OACLC,QAAQ,YACRC,OAAQyE,EALV,SAOE,sBACExE,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,gCAKV,sBAAKtD,UAAU,4EAAf,UACE,qBACE+C,MAAM,6BACN/C,UAAU,yBACVgD,KAAK,OACLC,QAAQ,YACRC,OAAO,eALT,SAOE,sBACEC,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,2HAGN,mBAAGtD,UAAU,YAAb,SAA0BK,EAASkD,cACnC,wBACEvD,UAAU,mGACV2C,QAtGe,WACnBlC,IACFA,GAAU,GACVD,EACGuI,SAAS,CACRvH,WAAYnB,EAASoB,GACrBuH,YAAaP,GACbQ,QAAS,KAEVvH,MACC,WACEsG,GAAqB,GACrBvH,GAAU,MAEZ,SAACkB,GACClB,GAAU,GACVgG,EAAQ,GAAD,OAAI9E,EAAI6F,KAAJ,sBAuFXC,SAAUY,KAAgBI,GAH5B,SAKGJ,GAAc,gBAAkB,mBAGrC,sBAAKrI,UAAU,iEAAf,UACE,qBACE+C,MAAM,6BACN/C,UAAU,eACVgD,KAAK,OACLC,QAAQ,YACRC,OAAO,eALT,SAOE,sBACEC,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,kDAGN,0CAAaE,EAAW5B,SAE1B,sBAAK5B,UAAU,iEAAf,UACE,qBACE+C,MAAM,6BACN/C,UAAU,eACVgD,KAAK,OACLC,QAAQ,YACRC,OAAO,eALT,SAOE,sBACEC,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,6FAGLE,EAAW1B,GAfd,MAe6B0B,EAAWzB,MAExC,qBAAK/B,UAAU,6CAAf,SACGoB,EAAWjB,OAAS,EACjB,cACA,4CAEL8H,GACC,qBAAKjI,UAAU,gDAAf,SACE,cAACsG,EAAD,CACEjG,SAAUA,EACVG,SAAUA,EACVE,YAAaA,EACbC,WAAYA,EACZC,OAAQA,EACR4F,iBAAkB,WAChBsB,GAA0B,GAC1BI,GAAuB,IAEzBzB,QAASA,EACThG,UAAWA,EACX8F,QAAS,kBAAM2B,GAAuB,QAI3C9G,GACC,8BACE,cAAC,EAAD,CACEf,SAAUA,EACVe,WAAYA,EACZlB,MAAOA,EACPM,SAAUA,EACVE,YAAaA,EACbC,WAAYA,EACZC,OAAQA,EACRH,UAAWA,EACX8E,oBAAqBmD,aC9QpB,SAASQ,EAAT,GAUX,IATF3C,EASC,EATDA,QAEA/F,GAOC,EARDH,SAQC,EAPDG,UAIA2I,GAGC,EANDzI,YAMC,EALDC,WAKC,EAJDC,OAIC,EAHDuI,iBACA1I,EAEC,EAFDA,UACAgG,EACC,EADDA,QACC,EACyC3F,mBAAS,IADlD,mBACMsI,EADN,KACqBC,EADrB,OAEqDvI,mBAAS,IAF9D,mBAEMwI,EAFN,KAE2BC,EAF3B,OAGiDzI,mBAChDgI,MAASU,IAAI,EAAG,OAAOC,QAAQ,OAAO5H,UAJvC,mBAGM6H,EAHN,KAGyBC,EAHzB,OAM6C7I,mBAC5CgI,MAASU,IAAI,EAAG,QAAQI,MAAM,OAAO/H,UAPtC,mBAMMgI,EANN,KAMuBC,EANvB,KA4CD,OACE,mCACE,cAAC,IAAD,CAAY9C,QAAM,EAAC5E,MAAM,EAAMF,GAAIC,WAAnC,SACE,cAAC,IAAD,CACED,GAAG,MACHlC,UAAU,sDACVuG,QAASA,EAHX,SAKE,sBAAKvG,UAAU,gCAAf,UACE,cAAC,IAAWiH,MAAZ,CACE/E,GAAIC,WACJE,MAAM,wBACNC,UAAU,YACVC,QAAQ,cACRC,MAAM,uBACNC,UAAU,cACVC,QAAQ,YAPV,SASE,cAAC,IAAOwE,QAAR,CAAgBlH,UAAU,oBAG5B,sBACEA,UAAU,qCACVmH,cAAY,OAFd,oBAMA,cAAC,IAAWF,MAAZ,CACE/E,GAAIC,WACJE,MAAM,wBACNC,UAAU,qBACVC,QAAQ,wBACRC,MAAM,uBACNC,UAAU,wBACVC,QAAQ,qBAPV,SASE,sBAAK1C,UAAU,8IAAf,UACE,cAAC,IAAOoH,MAAR,CACElF,GAAG,KACHlC,UAAU,8CAFZ,8BAMA,cAAC,EAAD,CACE8F,MAAM,QACNJ,MAAO0D,EACPpD,cAAe,SAACqB,GAAD,OAAOgC,EAAiBhC,EAAEC,OAAO5B,UAElD,cAAC,EAAD,CACEI,MAAM,cACNJ,MAAO4D,EACPtD,cAAe,SAACqB,GAAD,OAAOkC,EAAuBlC,EAAEC,OAAO5B,UAExD,cAAC,EAAD,CACEI,MAAM,WACNO,KAAK,OACLJ,QAAM,EACNP,MAAOgE,EACP1D,cAAe,SAACG,GAAD,OAAUwD,EAAqBxD,MAEhD,cAAC,EAAD,CACEL,MAAM,UACNJ,MAAOmE,EACPxD,KAAK,OACLJ,QAAM,EACND,cAAe,SAACG,GAAD,OAAU2D,EAAmB3D,MAE9C,sBAAKnG,UAAU,4BAAf,UACE,wBACEqG,KAAK,SACLrG,UAAU,0OACV2C,QAAS4D,EAHX,oBAOA,wBACEF,KAAK,SACLrG,UAAU,gQACV2C,QAtGE,WACdlC,IACFA,GAAU,GACVD,EACGuJ,aAAa,CACZjH,MAAOsG,EACP7F,YAAa+F,EACbxH,UAAWgH,IAAOY,GAAmBM,OAAO,KAC5CjI,QAAS+G,IAAOe,GAAiBG,OAAO,OAEzCtI,MACC,WACEjB,GAAU,GACV0I,OAEF,SAACxH,GACC8E,EAAQ,GAAD,OAAI9E,EAAI6F,KAAJ,iBACX/G,GAAU,GACVwJ,QAAQC,IAAIvI,QAqFJ8F,WA/Gd2B,EAAcjJ,OAAS,GACvBmJ,EAAoBnJ,OAAS,GAC7BiJ,EAAcjJ,OAAS,GACvBuJ,GACAG,GAuGY,qCClIlB,IAwDeM,EAxDS,SAAC,GAOnB,EANJ3J,SAMI,EALJE,YAKI,EAJJC,WAII,EAHJC,OAGI,EAFJH,UAEK,IADL2J,EACI,EADJA,mBACI,EAC4BtJ,oBAAS,GADrC,mBACCC,EADD,KACYC,EADZ,OAE4BF,oBAAS,GAFrC,mBAECG,EAFD,KAEYC,EAFZ,OAIuBc,aAAa,kBAAMhB,GAAa,KAAO,KAAzDiB,EAJL,oBASJ,OAHAX,qBAAU,WACRW,MACC,CAACA,IAEF,cAAC,IAAD,CACEC,GAAIC,WACJC,KAAMrB,EACNsB,MAAK,wCACLC,UAAU,sCACVC,QAAQ,iCACRC,MAAM,gDACNC,UAAU,kCACVC,QAAQ,sBARV,SAUE,wBACEC,QAASyH,EACTpK,UAAS,kCACPiB,EACI,6BACA,6BAHG,uEAKT2B,aAAc,kBAAM1B,GAAa,IACjC2B,aAAc,kBAAM3B,GAAa,IARnC,SAUE,qBACE6B,MAAM,6BACN/C,UAAU,kBACVgD,KAAK,OACLC,QAAQ,YACRC,OAAO,eALT,SAOE,sBACEC,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,0BC7CDE,EAAa,SAAC2C,GACzB,OAAOA,EAAK6D,OAAO,sBAGRnI,EAAS,SAACsE,GACrB,IAAMkE,EAAYC,KAAKC,MAAMpE,EAAO,KAASqE,UAC7C,OAAO1B,IAAOuB,EAAW,MAwIZI,EArIG,SAAC,GAOZ,IANLjK,EAMI,EANJA,SACAE,EAKI,EALJA,YACAC,EAII,EAJJA,WACAC,EAGI,EAHJA,OACAH,EAEI,EAFJA,UACAgG,EACI,EADJA,QACI,EAC8B3F,qBAD9B,mBACG4J,EADH,KACcC,EADd,OAEsD7J,oBAAS,GAF/D,mBAEG8J,EAFH,KAE0BC,EAF1B,OAG4C/J,qBAH5C,mBAGGgK,EAHH,KAGqBC,EAHrB,OAIgDjK,oBAAS,GAJzD,mBAIGkK,EAJH,KAIuBC,EAJvB,KAMEC,EAAmB,SAAC7K,GACxB8K,aAAaC,QAAQ,iBAAkB/K,EAASoB,IAChDsJ,EAAoB1K,IAqDtB,OArCAiB,qBAAU,WACR,GAAIoJ,GAAaA,EAAUvK,OAAS,EAAG,CACrC,IAAMqB,EAAa2J,aAAaE,QAAQ,kBACxCX,EACGvG,QAAO,SAACkD,GAAD,MAAO,UAAGA,EAAE5F,MAASD,KAC5B8C,SAAQ,SAAC+C,GACR0D,EAAoB1D,SAGzB,CAACqD,IAEJpJ,qBAAU,WACJb,GAAamK,IACfnK,GAAU,GACVD,EAAS8K,gBAAgB5J,MACvB,SAACgJ,GACCjK,GAAU,GACVkK,EACED,EAAUjH,MAAK,SAAC8H,EAAIC,GAAL,OACbD,EAAGzJ,YAAc0J,EAAG1J,UAChB,EACAyJ,EAAGzJ,UAAY0J,EAAG1J,WACjB,EACD,MAGR+I,GAAyB,MAE3B,SAAClJ,GACCkJ,GAAyB,GACzBpK,GAAU,GACVgG,EAAQ,GAAD,OAAI9E,EAAI6F,KAAJ,uBAIhB,CAAChH,EAAUC,EAAWgG,EAASmE,IAGhC,sBAAK5K,UAAU,6BAAf,WACI8K,GACA,sBAAK9K,UAAU,0DAAf,UACE,cAAC,EAAD,CACEQ,SAAUA,EACVE,YAAaA,EACbC,WAAYA,EACZC,OAAQA,EACRH,UAAWA,EACX2J,mBAnDiB,WACzBa,GAAsB,MAoDfP,GACCA,EAAU9G,KAAI,SAACvD,EAAUC,GACvB,OACE,cAAC,EAAD,CAEED,SAAUA,EACVC,MAAOA,EACPE,SAAUA,EACVE,YAAaA,EACbC,WAAYA,EACZC,OAAQA,EACRH,UAAWA,EACXI,mBAAoBqK,GARf7K,EAASoB,UAczBuJ,GACC,qBAAKhL,UAAU,gDAAf,SACE,cAACkJ,EAAD,CACE1I,SAAUA,EACVE,YAAaA,EACbC,WAAYA,EACZC,OAAQA,EACRuI,gBAAiB,WAjFzB0B,GAAyB,GAmFfI,GAAsB,IAExBxK,UAAWA,EACXgG,QAASA,EACTF,QAAS,kBAAM0E,GAAsB,QAI1CH,GACC,qBAAK9K,UAAU,mBAAf,SACE,cAAC,EAAD,CACEK,SAAUyK,EACVtK,SAAUA,EACVE,YAAaA,EACbC,WAAYA,EACZC,OAAQA,EACRH,UAAWA,EACXgG,QAASA,EACTF,QA3GiB,WACzB4E,aAAaM,WAAW,kBACxBV,EAAoB,e,SC/BlBW,EAAgB,SAAC,GAMhB,IALLlL,EAKI,EALJA,SACAE,EAII,EAJJA,YAGAD,GACI,EAHJE,WAGI,EAFJC,OAEI,EADJH,WACI,EAC0BK,oBAAS,GADnC,mBACG6K,EADH,KACYC,EADZ,KAGJtK,qBAAU,WACJZ,GACFF,EAASmI,aAAa,CAAEtE,UAAW3D,EAAY2D,YAAa3C,MAC1D,SAACkH,GACCgD,EAAWhD,MAEb,SAACjH,GACCsI,QAAQC,IAAIvI,QAIjB,CAACgK,EAASnL,EAAUE,IA4BvB,OACE,sBAAKV,UAAU,2BAAf,UACE,8CACA,eAAC,IAAD,CACE+D,QAAS4H,EACThG,SA/Ba,SAACkG,GACdA,GACFpL,GAAU,GACVD,EAASsL,YAAY,IAAIpK,MACvB,WACEkK,GAAW,GACXnL,GAAU,MAEZ,SAACkB,GACClB,GAAU,QAIdA,GAAU,GACVD,EAASuL,aAAa,IAAIrK,MACxB,WACEkK,GAAW,GACXnL,GAAU,MAEZ,SAACkB,GACClB,GAAU,QAYZT,UAAS,UACP2L,EAAU,cAAgB,cADnB,4DAHX,UAOE,sBAAM3L,UAAU,UAAhB,sBACA,sBACEA,UAAS,UACP2L,EAAU,gBAAkB,gBADrB,kEA+FJK,EAtFO,SAAC,GAMhB,IALLxL,EAKI,EALJA,SACAE,EAII,EAJJA,YACAC,EAGI,EAHJA,WACAC,EAEI,EAFJA,OACAH,EACI,EADJA,UACI,EAU4BK,oBAAS,GAVrC,mBAUCC,EAVD,KAUYC,EAVZ,OAWuBgB,aAAa,kBAAMhB,GAAa,KAAO,KAAzDiB,EAXL,oBAiBJ,OAJAX,qBAAU,WACRW,MACC,CAACA,IAGF,mCACE,cAAC,IAAD,CACEC,GAAIC,WACJC,KAAMrB,EACNsB,MAAM,wCACNC,UAAU,sCACVC,QAAQ,iCACRC,MAAM,gDACNC,UAAU,kCACVC,QAAQ,sBARV,SAUE,sBAAK1C,UAAU,gIAAf,UACE,qBACEA,UAAU,YACViM,IAAI,0CACJC,IAAI,cAGN,qBACElM,UAAS,kBACPU,GAAeA,EAAY2D,UAAY,WAAa,GAD7C,qCADX,yCAOA,sBAAKrE,UAAU,uBAAf,UACGU,GACC,sBAAKV,UAAU,OAAf,UACE,oBAAGA,UAAU,iBAAb,yBACeU,EAAY2D,aAE3B,cAAC,EAAD,CACE7D,SAAUA,EACVE,YAAaA,EACbC,WAAYA,EACZC,OAAQA,EACRH,UAAWA,OAIhBC,EACC,wBACEV,UAAU,iFACV2C,QAxDE,WACd/B,EAAOuL,UACPC,OAAOC,SAASC,QAAQF,OAAOC,SAASE,OAASH,OAAOC,SAASG,WAoDvD,oBAOA,wBACExM,UAAU,iFACV2C,QAnEC,WACb/B,EAAO6L,cAAc9L,EAAW+L,aAAc,oBAgEpC,8BCtICC,EAZU,SAAC,GAAmB,IAAjBC,EAAgB,EAAhBA,UAC1B,OACE,mCACGA,EACC,qBAAK5M,UAAU,+FAEf,qBAAKA,UAAU,sBCHR,SAAS6M,EAAT,GAA0C,IAApBC,EAAmB,EAAnBA,MAAOC,EAAY,EAAZA,SAC1C,SAASC,IACPD,IAGF,OACE,mCACE,cAAC,IAAD,CAAY/F,QAAM,EAAC5E,KAAgB,KAAV0K,EAAc5K,GAAIC,WAA3C,SACE,cAAC,IAAD,CACED,GAAG,MACHlC,UAAU,qCACVuG,QAASyG,EAHX,SAKE,sBAAKhN,UAAU,gCAAf,UACE,cAAC,IAAWiH,MAAZ,CACE/E,GAAIC,WACJE,MAAM,wBACNC,UAAU,YACVC,QAAQ,cACRC,MAAM,uBACNC,UAAU,cACVC,QAAQ,YAPV,SASE,cAAC,IAAOwE,QAAR,CAAgBlH,UAAU,oBAI5B,sBACEA,UAAU,qCACVmH,cAAY,OAFd,oBAMA,cAAC,IAAWF,MAAZ,CACE/E,GAAIC,WACJE,MAAM,wBACNC,UAAU,qBACVC,QAAQ,wBACRC,MAAM,uBACNC,UAAU,wBACVC,QAAQ,qBAPV,SASE,sBAAK1C,UAAU,uIAAf,UACE,cAAC,IAAOoH,MAAR,CACElF,GAAG,KACHlC,UAAU,8CAFZ,wCAMA,qBAAKA,UAAU,OAAf,SACE,mBAAGA,UAAU,wBAAb,SAAsC8M,MAGxC,qBAAK9M,UAAU,OAAf,SACE,wBACEqG,KAAK,SACLrG,UAAU,4OACV2C,QAASqK,EAHX,mCCjDlB,IAsDeC,EAtDH,SAAC,GAAmD,IAAjDzM,EAAgD,EAAhDA,SAAUE,EAAsC,EAAtCA,YAAaC,EAAyB,EAAzBA,WAAYC,EAAa,EAAbA,OAAa,EAC3BE,oBAAS,GADkB,mBACtD8L,EADsD,KAC3CM,EAD2C,OAEnCpM,mBAAS,IAF0B,mBAEtDgM,EAFsD,KAE/CK,EAF+C,KAI7D,OACE,sBAAKnN,UAAU,oBAAf,UACE,cAAC,EAAD,CACEQ,SAAUA,EACVE,YAAaA,EACbC,WAAYA,EACZC,OAAQA,EACRH,UAAWyM,IAEb,cAACL,EAAD,CAAYC,MAAOA,EAAOC,SAAU,kBAAMI,EAAS,OACnD,cAAC,EAAD,CAAkBP,UAAWA,IAC5BlM,GACC,cAAC,EAAD,CACEF,SAAUA,EACVE,YAAaA,EACbC,WAAYA,EACZC,OAAQA,EACRH,UAAWyM,EACXzG,QAAS,SAAC9E,GAAD,OAASwL,EAASxL,U,8ECrBrC,oCAAAyL,EAAA,6DACQzM,EAAa0M,IAAUC,cAD/B,SAIqBC,UAAA,aACjBC,KAAM,CACJC,SAAU,IAAIF,YAAkBG,8BAE/B/M,IARP,UAIQgN,EAJR,SAYQC,EAAmB,IAAIL,mBAAyBI,IAIjCE,eAhBvB,6BAkBiBD,EAAiBC,eAlBlC,SAmBsBD,EAAiBE,UAAUC,QAnBjD,mBAmB0DC,OAFtDtN,EAjBJ,CAkBM2D,UAlBN,KAmBM4J,QAnBN,+BAwByB,IAAIV,WACzBK,EAAiBE,UACjBnN,EAAW+L,aACX,CAEEwB,YAAa,CACX,gBACA,iBACA,YACA,gBAGFC,cAAe,CACb,eACA,gBACA,WACA,cACA,gBAIFC,OAAQR,EAAiBC,iBA7C/B,eAwBQrN,EAxBR,yBAiDS,CAAEA,WAAUE,cAAaC,aAAYiN,qBAjD9C,6C,sBAoDAxB,OAAOiC,gB,0CAAkBC,GAAe5M,MACtC,YAA8D,IAA3DlB,EAA0D,EAA1DA,SAAUE,EAAgD,EAAhDA,YAAaC,EAAmC,EAAnCA,WAAYiN,EAAuB,EAAvBA,iBACpCW,IAASC,OACP,cAAC,EAAD,CACEhO,SAAUA,EACVE,YAAaA,EACbC,WAAYA,EACZC,OAAQgN,IAEVa,SAASC,eAAe,a,iBCtE9B,IAAMC,EACJrB,0JAAYqB,eAAiB,8BA+B/BC,EAAOC,QA7BP,SAAmBC,GACjB,OAAQA,GACN,IAAK,UACH,MAAO,CACLC,UAAW,UACXC,QAAS,+BACTtC,aAAciC,EACdM,UAAW,0BACXC,UAAW,mCAIf,IAAK,aACL,IAAK,cACL,IAAK,UACH,MAAO,CACLH,UAAW,UACXC,QAAS,+BACTtC,aAAciC,EACdM,UAAW,kCACXC,UAAW,mCAEf,QACE,MAAMC,MAAM,6BAAD,OACoBL,EADpB,+C","file":"static/js/main.11556724.chunk.js","sourcesContent":["import { Fragment, useEffect, useState } from \"react\";\nimport { Transition } from \"@headlessui/react\";\nimport { useTimeoutFn } from \"react-use\";\nimport { formatDate, toDate } from \"./Elections\";\n\nconst ElectionCard = ({\n  election,\n  index,\n  delay,\n  contract,\n  currentUser,\n  nearConfig,\n  wallet,\n  onLoading,\n  onElectionSelected,\n}) => {\n  let [isShowing, setIsShowing] = useState(false);\n  let [isHovered, setIsHovered] = useState(false);\n  const [votes, setVotes] = useState();\n  const [candidates, setCandidates] = useState([]);\n\n  useEffect(() => {\n    if (onLoading) {\n      onLoading(true);\n      contract.get_votes({ electionId: election.id }).then(\n        (votes) => {\n          onLoading(false);\n          setVotes(votes);\n        },\n        (err) => {\n          onLoading(false);\n        }\n      );\n    }\n  }, [contract, election.id, onLoading]);\n\n  useEffect(() => {\n    if (votes && votes.votes && votes.votes.length > 0) {\n      setCandidates(votes.votes);\n    } else {\n      setCandidates([]);\n    }\n  }, [votes]);\n\n  const creationDate = toDate(election.creationDate);\n  const startDate = toDate(election.startDate);\n  const endDate = toDate(election.endDate);\n\n  let [, , resetIsShowing] = useTimeoutFn(\n    () => setIsShowing(true),\n    index * 200\n  );\n\n  useEffect(() => {\n    resetIsShowing();\n  }, [resetIsShowing]);\n\n  return (\n    <Transition\n      as={Fragment}\n      show={isShowing}\n      enter={`transform transition duration-[${delay}ms]`}\n      enterFrom=\"opacity-0 rotate-[-120deg] scale-50\"\n      enterTo=\"opacity-100 rotate-0 scale-100\"\n      leave=\"transform duration-200 transition ease-in-out\"\n      leaveFrom=\"opacity-100 rotate-0 scale-100 \"\n      leaveTo=\"opacity-0 scale-95 \"\n    >\n      <div\n        onClick={() => onElectionSelected(election)}\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n        className={`w-full bg-gradient-to-r ${\n          isHovered\n            ? \"from-yellow-500 to-red-600\"\n            : \"from-yellow-400 to-red-500\"\n        }  p-6 max-w-sm mx-auto rounded-xl flex-col shadow-md flex space-x-4 space-y-2 cursor-pointer`}\n      >\n        <div className=\"text-xl font-medium text-black text-center\">\n          {election.title}\n        </div>\n        <div className=\"text-xl font-medium text-black break-all flex flex-row justify-start\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-6 w-6 mr-1\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n            />\n          </svg>\n          {election.description}\n        </div>\n        <div className=\"text-md font-medium text-black text flex flex-row items-center\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-6 w-6 mr-1\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n            />\n          </svg>\n          <p>Created: {formatDate(creationDate)}</p>\n        </div>\n        <div className=\"text-sm font-medium text-black text flex flex-row items-center\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-6 w-6 mr-1\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n            />\n          </svg>\n          {formatDate(startDate)} - {formatDate(endDate)}\n        </div>\n        <div className=\"text-sm font-medium text-black text flex flex-row items-center\">\n          {candidates &&\n            candidates.length === 0 &&\n            \"No candides yes, apply to be the first!\"}\n          {candidates &&\n            candidates.length > 0 &&\n            `${candidates.length} candidate(s) applied`}\n        </div>\n        <div className=\"text-sm font-medium text-black text flex flex-row items-center\">\n          {candidates && candidates.length > 0 && (\n            <div>\n              Leaderboard:\n              {candidates\n                .sort((c1, c2) =>\n                  c1.votes.length === c2.votes.length\n                    ? 0\n                    : c1.votes.length > c2.votes.length\n                    ? -1\n                    : 1\n                )\n                .map((c, index) => {\n                  return <Leaderboard key={index} candidate={c} />;\n                })}\n            </div>\n          )}\n        </div>\n      </div>\n    </Transition>\n  );\n};\n\nconst Leaderboard = ({ candidate }) => {\n  return (\n    <div className=\"flex\">\n      <div>\n        {candidate.candidate.name} ({candidate.votes.length})\n      </div>\n    </div>\n  );\n};\n\nexport default ElectionCard;\n","import { useState, useEffect } from \"react\";\nimport { RadioGroup } from \"@headlessui/react\";\n\nconst CandidateCards = ({\n  election,\n  candidates,\n  votes,\n  contract,\n  currentUser,\n  nearConfig,\n  wallet,\n  onCandidateSelected,\n  onLoading,\n}) => {\n  const [selected, setSelected] = useState();\n\n  return (\n    <>\n      <div className=\"w-full\">\n        <RadioGroup\n          value={selected}\n          onChange={(c) => {\n            setSelected(c);\n            onCandidateSelected(c);\n          }}\n        >\n          <RadioGroup.Label className=\"sr-only\">Candidate</RadioGroup.Label>\n          <div className=\"flex flex-col justify-between\">\n            {candidates.map((candidate, index) => (\n              <RadioGroup.Option\n                key={index}\n                value={candidate.accountId}\n                className={({ active, checked }) =>\n                  `${\n                    active\n                      ? \"ring-2 ring-offset-2 ring-offset-sky-300 ring-white ring-opacity-60\"\n                      : \"\"\n                  }\n                      ${\n                        checked\n                          ? \"bg-sky-900 bg-opacity-75 text-white bg-green-500\"\n                          : \"bg-white\"\n                      }\n                      w-full min-w-10 relative rounded-lg shadow-md px-5 py-4 cursor-pointer flex focus:outline-none my-2`\n                }\n              >\n                {({ active, checked }) => (\n                  <CandidateDetails\n                    candidate={candidate}\n                    votes={votes}\n                    active={active}\n                    checked={checked}\n                    onLoading={onLoading}\n                  />\n                )}\n              </RadioGroup.Option>\n            ))}\n          </div>\n        </RadioGroup>\n      </div>\n    </>\n  );\n};\n\nconst CandidateDetails = ({ candidate, votes, active, checked, onLoading }) => {\n  const [candidateVotes, setCandidateVotes] = useState([]);\n\n  useEffect(() => {\n    if (candidate && votes && votes.votes) {\n      votes.votes\n        .filter((v) => v.candidate.accountId === candidate.accountId)\n        .forEach((v) => {\n          setCandidateVotes(v.votes);\n        });\n    }\n  }, [votes, candidate]);\n\n  return (\n    <div className=\"flex items-center justify-between w-full\">\n      <div className=\"w-1/4 flex items-center\">\n        <div className=\"text-sm\">\n          <RadioGroup.Label\n            as=\"div\"\n            className={`font-medium flex align-center ${\n              checked ? \"text-white\" : \"text-gray-900\"\n            }`}\n          >\n            <AccountIcon />\n            <p className=\"flex-grow\">{candidate.accountId}</p>\n          </RadioGroup.Label>\n          <RadioGroup.Description\n            as=\"span\"\n            className={`inline mx-2${\n              checked ? \"text-sky-100 bg-green-400\" : \"text-gray-500\"\n            }`}\n          >\n            <div className=\"flex\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"h-6 w-6 mr-2 flex-none\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"\n                />\n              </svg>\n              <p className=\"flex-grow\">{candidate.name}</p>\n            </div>\n            <div className=\"flex\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"flex-none mr-2 h-6 w-6 \"\n                viewBox=\"0 0 20 20\"\n                fill=\"currentColor\"\n              >\n                <path\n                  fillRule=\"evenodd\"\n                  d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\"\n                  clipRule=\"evenodd\"\n                />\n              </svg>\n              <p className=\"flex-grow\">{candidate.slogan}</p>\n            </div>\n            <div className=\"flex\">\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                className=\"flex-none mr-2 h-6 w-6\"\n                fill=\"none\"\n                viewBox=\"0 0 24 24\"\n                stroke=\"currentColor\"\n              >\n                <path\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  strokeWidth={2}\n                  d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n                />\n              </svg>\n              <p className=\"flex-grow\">{candidate.goals}</p>\n            </div>\n          </RadioGroup.Description>\n        </div>\n      </div>\n      <div className=\"self-start flex flex-col\">\n        <div>\n          {candidateVotes && candidateVotes.length > 0\n            ? `Votes (${candidateVotes.length}):`\n            : \"No votes yes\"}\n        </div>\n        {candidateVotes &&\n          candidateVotes.map((vote, index) => (\n            <VoteCard key={index} vote={vote} />\n          ))}\n      </div>\n      <div className=\"flex-shrink-0 text-white\">\n        {checked && <CheckIcon className=\"w-6 h-6\" />}\n      </div>\n    </div>\n  );\n};\n\nconst VoteCard = ({ vote }) => {\n  return (\n    <div>\n      <div className=\"flex\">\n        <div>\n          <AccountIcon />\n        </div>\n        <div>{vote.accountId}</div>\n      </div>\n    </div>\n  );\n};\n\nfunction AccountIcon(props) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      className=\"h-6 w-6 mr-2 flex-none\"\n      fill=\"none\"\n      viewBox=\"0 0 24 24\"\n      stroke=\"currentColor\"\n      {...props}\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n        d=\"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207\"\n      />\n    </svg>\n  );\n}\n\nfunction CheckIcon(props) {\n  return (\n    <svg viewBox=\"0 0 24 24\" fill=\"none\" {...props}>\n      <circle cx={12} cy={12} r={12} fill=\"#fff\" opacity=\"0.2\" />\n      <path\n        d=\"M7 13l3 3 7-7\"\n        stroke=\"#fff\"\n        strokeWidth={1.5}\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n      />\n    </svg>\n  );\n}\n\nexport default CandidateCards;\n","import DateTimePicker from \"react-datetime-picker\";\n\nconst TextField = ({ label, value, lines, onValueChange, isDate }) => {\n  return (\n    <div className=\"flex flex-row mt-2 relative rounded-md\">\n      <label\n        htmlFor={label}\n        className=\"block text-sm font-medium text-gray-700 mr-10 w-1/3\"\n      >\n        {label}\n      </label>\n      {isDate ? (\n        <DateTimePicker\n          className=\"border-2 p-1 focus:ring-indigo-500 focus:border-indigo-500 block w-2/3 sm:text-sm border-gray-200 rounded-md\"\n          value={value}\n          onChange={(date) => onValueChange(date)}\n        />\n      ) : lines ? (\n        <textarea\n          className=\"border-2 p-1 focus:ring-indigo-500 focus:border-indigo-500 block w-2/3 sm:text-sm border-gray-200 rounded-md\"\n          name={label}\n          id={label}\n          rows={lines}\n          onChange={onValueChange}\n        ></textarea>\n      ) : (\n        <input\n          type=\"text\"\n          name={label}\n          id={label}\n          className=\"border-2 p-1 focus:ring-indigo-500 focus:border-indigo-500 block w-2/3 sm:text-sm border-gray-200 rounded-md\"\n          value={value}\n          onChange={onValueChange}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default TextField;\n","import { Dialog, Transition } from \"@headlessui/react\";\nimport { Fragment, useState } from \"react\";\nimport TextField from \"./TextField\";\n\nexport default function CandidateDialog({\n  onClose,\n  election,\n  contract,\n  currentUser,\n  nearConfig,\n  wallet,\n  onCandidateAdded,\n  onLoading,\n  onError,\n}) {\n  const [candidateName, setCandidateName] = useState(\"\");\n  const [candidateSlogan, setCandidateSlogan] = useState(\"\");\n  const [candidateGoals, setCandidateGoals] = useState(\"My goals\");\n\n  const addCandidacy = () => {\n    if (onLoading) {\n      onLoading(true);\n      contract\n        .add_candidacy({\n          electionId: election.id,\n          name: candidateName,\n          slogan: candidateSlogan,\n          goals: candidateGoals,\n        })\n        .then(\n          () => {\n            onLoading(false);\n            onCandidateAdded();\n          },\n          (err) => {\n            onLoading(false);\n            onError(`${err.kind[\"ExecutionError\"]}`);\n          }\n        );\n    }\n  };\n\n  const canAddCandidacy = () => {\n    return (\n      candidateName.length > 0 &&\n      candidateSlogan.length > 0 &&\n      candidateGoals.length > 0\n    );\n  };\n\n  return (\n    <>\n      <Transition appear show={true} as={Fragment}>\n        <Dialog\n          as=\"div\"\n          className=\"fixed inset-0 z-10 overflow-y-auto\"\n          onClose={onClose}\n        >\n          <div className=\"min-h-screen px-4 text-center\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0\"\n              enterTo=\"opacity-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100\"\n              leaveTo=\"opacity-0\"\n            >\n              <Dialog.Overlay className=\"fixed inset-0\" />\n            </Transition.Child>\n\n            <span\n              className=\"inline-block h-screen align-middle\"\n              aria-hidden=\"true\"\n            >\n              &#8203;\n            </span>\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <div className=\"inline-block w-full md:w-1/2 lg:w-1/3 p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl\">\n                <Dialog.Title\n                  as=\"h3\"\n                  className=\"text-lg font-medium leading-6 text-gray-900\"\n                >\n                  Register as a cadidate\n                </Dialog.Title>\n                <TextField\n                  label=\"Name\"\n                  value={candidateName}\n                  onValueChange={(e) => setCandidateName(e.target.value)}\n                />\n                <TextField\n                  label=\"Slogan\"\n                  value={candidateSlogan}\n                  onValueChange={(e) => setCandidateSlogan(e.target.value)}\n                />\n                <TextField\n                  label=\"Goals\"\n                  value={candidateGoals}\n                  lines={4}\n                  onValueChange={(e) => setCandidateGoals(e.target.value)}\n                />\n                <div className=\"mt-4 flex justify-between\">\n                  <button\n                    type=\"button\"\n                    className=\"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-red-100 border border-transparent rounded-md hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500\"\n                    onClick={onClose}\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"disabled:opacity-50 inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500\"\n                    onClick={addCandidacy}\n                    disabled={!canAddCandidacy()}\n                  >\n                    Submit\n                  </button>\n                </div>\n              </div>\n            </Transition.Child>\n          </div>\n        </Dialog>\n      </Transition>\n    </>\n  );\n}\n","import { Fragment, useState, useEffect } from \"react\";\nimport { Transition } from \"@headlessui/react\";\nimport { formatDate, toDate } from \"./Elections\";\nimport CandidateCards from \"./CandidateCards\";\nimport CandidateDialog from \"./CandidateDialog\";\nimport { useTimeoutFn } from \"react-use\";\nimport moment from \"moment\";\n\nconst ElectionDetails = ({\n  election,\n  contract,\n  currentUser,\n  nearConfig,\n  wallet,\n  onClose,\n  onLoading,\n  onError,\n}) => {\n  const [isShowing, setIsShowing] = useState(false);\n  const [closeButtonColor, setCloseButtonColor] = useState(\"#000\");\n  const [candidates, setCandidates] = useState([]);\n  const [votes, setVotes] = useState([]);\n  const [shouldReloadCandidates, setShouldReloadCandidates] = useState(false);\n  const [shouldReloadVotes, setShouldReloadVotes] = useState(false);\n  const [showCandidateDialog, setShowCandidateDialog] = useState(false);\n\n  const creationDate = toDate(election.creationDate);\n  const startDate = toDate(election.startDate);\n  const endDate = toDate(election.endDate);\n  let [, , resetIsShowing] = useTimeoutFn(() => setIsShowing(true), 100);\n\n  const [isGodMode, setIsGodeMode] = useState(false);\n  const [isUserVoted, setIsUserVoted] = useState(false);\n  const [isUserApplied, setIsUserApplied] = useState(false);\n  const [selectedCandidate, setSelectedCandidate] = useState();\n\n  useEffect(() => {\n    if (currentUser) {\n      contract\n        .get_god_mode({ accountId: currentUser.accountId })\n        .then((mode) => {\n          setIsGodeMode(mode);\n        });\n    }\n  }, [isGodMode, contract, currentUser]);\n\n  useEffect(() => {\n    if (currentUser && currentUser.accountId && candidates) {\n      candidates\n        .filter((c) => c.accountId === currentUser.accountId)\n        .forEach(() => setIsUserApplied(true));\n    }\n  }, [contract, candidates, currentUser]);\n\n  useEffect(() => {\n    if (currentUser && currentUser.accountId && votes && votes.votes) {\n      votes.votes.forEach((c) => {\n        c.votes\n          .filter((v) => v.accountId === currentUser.accountId)\n          .forEach((v) => setIsUserVoted(true));\n      });\n    }\n  }, [contract, votes, currentUser]);\n\n  useEffect(() => {\n    if (onLoading) {\n      onLoading(true);\n      contract.get_candidates({ electionId: election.id }).then(\n        (candidates) => {\n          onLoading(false);\n          setCandidates(candidates);\n        },\n        (err) => {\n          onLoading(false);\n        }\n      );\n    }\n  }, [contract, election.id, shouldReloadCandidates, onLoading]);\n\n  const canAddCandidacy = () => {\n    return !isUserApplied && (isGodMode || startDate < moment());\n  };\n\n  useEffect(() => {\n    if (onLoading) {\n      onLoading(true);\n      contract.get_votes({ electionId: election.id }).then(\n        (votes) => {\n          onLoading(false);\n          setShouldReloadVotes(false);\n          setVotes(votes);\n        },\n        (err) => {\n          onLoading(false);\n        }\n      );\n    }\n  }, [contract, election.id, onLoading, shouldReloadVotes]);\n\n  const voteForCandidate = () => {\n    if (onLoading) {\n      onLoading(true);\n      contract\n        .add_vote({\n          electionId: election.id,\n          candidateId: selectedCandidate,\n          comment: \"\",\n        })\n        .then(\n          () => {\n            setShouldReloadVotes(true);\n            onLoading(false);\n          },\n          (err) => {\n            onLoading(false);\n            onError(`${err.kind[\"ExecutionError\"]}`);\n          }\n        );\n    }\n  };\n\n  useEffect(() => {\n    resetIsShowing();\n  }, [resetIsShowing]);\n\n  return (\n    <Transition\n      as={Fragment}\n      show={isShowing}\n      enter={`transform transition duration-[250ms]`}\n      enterFrom=\"opacity-0 rotate-[-120deg] scale-50\"\n      enterTo=\"opacity-100 rotate-0 scale-100\"\n      leave=\"transform duration-200 transition ease-in-out\"\n      leaveFrom=\"opacity-100 rotate-0 scale-100 \"\n      leaveTo=\"opacity-0 scale-95 \"\n    >\n      <div className=\"mw-800 bg-gradient-to-r from-indigo-300 to-indigo-500 p-6 rounded-xl flex-col shadow-md flex space-x-4\">\n        <div className=\"text-2xl flex justify-between font-medium items-center mb-4\">\n          <button\n            onClick={() => setShowCandidateDialog(true)}\n            disabled={!canAddCandidacy()}\n            className=\"disabled:opacity-50 ml-4 bg-green-500 hover:bg-green-700 w-14 h-14 text-white font-bold py-2 px-4 rounded-xl\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"h-6 w-6\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke=\"currentColor\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z\"\n              />\n            </svg>\n          </button>\n          <div className=\"mt-2 text-2xl text-center font-medium text-black\">\n            {election.title}\n          </div>\n          <button\n            className=\"font-medium \"\n            onClick={onClose}\n            onMouseEnter={() => setCloseButtonColor(\"#ddd\")}\n            onMouseLeave={() => setCloseButtonColor(\"#000\")}\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              className=\"h-6 w-6\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke={closeButtonColor}\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n        <div className=\"text-xl font-medium text-black flex flex-row items-center justify-between\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-6 w-6 mr-1 flex-none\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"\n            />\n          </svg>\n          <p className=\"flex-grow\">{election.description}</p>\n          <button\n            className=\"disabled:opacity-50 bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded flex-none\"\n            onClick={voteForCandidate}\n            disabled={isUserVoted || !selectedCandidate}\n          >\n            {isUserVoted ? \"Already voted\" : \"Submit vote\"}\n          </button>\n        </div>\n        <div className=\"text-md font-medium text-black text flex flex-row items-center\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-6 w-6 mr-1\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n            />\n          </svg>\n          <p>Created: {formatDate(creationDate)}</p>\n        </div>\n        <div className=\"text-md font-medium text-black text flex flex-row items-center\">\n          <svg\n            xmlns=\"http://www.w3.org/2000/svg\"\n            className=\"h-6 w-6 mr-1\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            stroke=\"currentColor\"\n          >\n            <path\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n              strokeWidth={2}\n              d=\"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z\"\n            />\n          </svg>\n          {formatDate(startDate)} - {formatDate(endDate)}\n        </div>\n        <div className=\"text-xl font-medium text-black text-center\">\n          {candidates.length > 0\n            ? \"Candidates:\"\n            : \"No cadidates yes, apply to be the first\"}\n        </div>\n        {showCandidateDialog && (\n          <div className=\"backdrop-filter backdrop-blur-lg mx-auto w-80\">\n            <CandidateDialog\n              election={election}\n              contract={contract}\n              currentUser={currentUser}\n              nearConfig={nearConfig}\n              wallet={wallet}\n              onCandidateAdded={() => {\n                setShouldReloadCandidates(true);\n                setShowCandidateDialog(false);\n              }}\n              onError={onError}\n              onLoading={onLoading}\n              onClose={() => setShowCandidateDialog(false)}\n            />\n          </div>\n        )}\n        {candidates && (\n          <div>\n            <CandidateCards\n              election={election}\n              candidates={candidates}\n              votes={votes}\n              contract={contract}\n              currentUser={currentUser}\n              nearConfig={nearConfig}\n              wallet={wallet}\n              onLoading={onLoading}\n              onCandidateSelected={setSelectedCandidate}\n            />\n          </div>\n        )}\n      </div>\n    </Transition>\n  );\n};\n\nexport default ElectionDetails;\n","import { Dialog, Transition } from \"@headlessui/react\";\nimport { Fragment, useState } from \"react\";\nimport TextField from \"./TextField\";\nimport moment from \"moment\";\n\nexport default function ElectionDialog({\n  onClose,\n  election,\n  contract,\n  currentUser,\n  nearConfig,\n  wallet,\n  onElectionAdded,\n  onLoading,\n  onError,\n}) {\n  const [electionTitle, setElectionTitle] = useState(\"\");\n  const [electionDescription, setElectionDescription] = useState(\"\");\n  const [electionStartDate, setElectionStartDate] = useState(\n    moment().add(1, \"day\").startOf(\"day\").toDate()\n  );\n  const [electionEndDate, setElectionEndDate] = useState(\n    moment().add(7, \"days\").endOf(\"day\").toDate()\n  );\n\n  const canAddElection = () => {\n    return (\n      electionTitle.length > 0 &&\n      electionDescription.length > 0 &&\n      electionTitle.length > 0 &&\n      electionStartDate &&\n      electionEndDate\n    );\n  };\n\n  const addElection = () => {\n    if (onLoading) {\n      onLoading(true);\n      contract\n        .add_election({\n          title: electionTitle,\n          description: electionDescription,\n          startDate: moment(electionStartDate).format(\"x\"),\n          endDate: moment(electionEndDate).format(\"x\"),\n        })\n        .then(\n          () => {\n            onLoading(false);\n            onElectionAdded();\n          },\n          (err) => {\n            onError(`${err.kind[\"ExecutionError\"]}`);\n            onLoading(false);\n            console.log(err);\n          }\n        );\n    }\n  };\n\n  return (\n    <>\n      <Transition appear show={true} as={Fragment}>\n        <Dialog\n          as=\"div\"\n          className=\"fixed inset-0 z-10 overflow-y-auto backdrop-blur-xl\"\n          onClose={onClose}\n        >\n          <div className=\"min-h-screen px-4 text-center\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0\"\n              enterTo=\"opacity-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100\"\n              leaveTo=\"opacity-0\"\n            >\n              <Dialog.Overlay className=\"fixed inset-0\" />\n            </Transition.Child>\n\n            <span\n              className=\"inline-block h-screen align-middle\"\n              aria-hidden=\"true\"\n            >\n              &#8203;\n            </span>\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <div className=\"inline-block w-full md:w-1/2 lg:w-1/3 p-6 my-8 overflow-auto text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl\">\n                <Dialog.Title\n                  as=\"h3\"\n                  className=\"text-lg font-medium leading-6 text-gray-900\"\n                >\n                  Add new election\n                </Dialog.Title>\n                <TextField\n                  label=\"Title\"\n                  value={electionTitle}\n                  onValueChange={(e) => setElectionTitle(e.target.value)}\n                />\n                <TextField\n                  label=\"Description\"\n                  value={electionDescription}\n                  onValueChange={(e) => setElectionDescription(e.target.value)}\n                />\n                <TextField\n                  label=\"Start on\"\n                  type=\"date\"\n                  isDate\n                  value={electionStartDate}\n                  onValueChange={(date) => setElectionStartDate(date)}\n                />\n                <TextField\n                  label=\"Ends on\"\n                  value={electionEndDate}\n                  type=\"date\"\n                  isDate\n                  onValueChange={(date) => setElectionEndDate(date)}\n                />\n                <div className=\"mt-4 flex justify-between\">\n                  <button\n                    type=\"button\"\n                    className=\"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-red-100 border border-transparent rounded-md hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500\"\n                    onClick={onClose}\n                  >\n                    Cancel\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"disabled:opacity-50 inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500\"\n                    onClick={addElection}\n                    disabled={!canAddElection()}\n                  >\n                    Submit\n                  </button>\n                </div>\n              </div>\n            </Transition.Child>\n          </div>\n        </Dialog>\n      </Transition>\n    </>\n  );\n}\n","import { Fragment, useEffect, useState } from \"react\";\nimport { Transition } from \"@headlessui/react\";\nimport { useTimeoutFn } from \"react-use\";\n\nconst AddElectionCard = ({\n  contract,\n  currentUser,\n  nearConfig,\n  wallet,\n  onLoading,\n  showAddNewElection,\n}) => {\n  let [isShowing, setIsShowing] = useState(false);\n  let [isHovered, setIsHovered] = useState(false);\n\n  let [, , resetIsShowing] = useTimeoutFn(() => setIsShowing(true), 100);\n\n  useEffect(() => {\n    resetIsShowing();\n  }, [resetIsShowing]);\n  return (\n    <Transition\n      as={Fragment}\n      show={isShowing}\n      enter={`transform transition duration-[200ms]`}\n      enterFrom=\"opacity-0 rotate-[-120deg] scale-50\"\n      enterTo=\"opacity-100 rotate-0 scale-100\"\n      leave=\"transform duration-200 transition ease-in-out\"\n      leaveFrom=\"opacity-100 rotate-0 scale-100 \"\n      leaveTo=\"opacity-0 scale-95 \"\n    >\n      <button\n        onClick={showAddNewElection}\n        className={`w-full bg-gradient-to-r ${\n          isHovered\n            ? \"from-green-300 to-blue-500\"\n            : \"from-green-100 to-blue-300\"\n        } p-6 mx-auto max-w-sm rounded-xl shadow-md space-x-4 cursor-pointer`}\n        onMouseEnter={() => setIsHovered(true)}\n        onMouseLeave={() => setIsHovered(false)}\n      >\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          className=\"h-6 w-6 mx-auto\"\n          fill=\"none\"\n          viewBox=\"0 0 24 24\"\n          stroke=\"currentColor\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth={2}\n            d=\"M12 4v16m8-8H4\"\n          />\n        </svg>\n      </button>\n    </Transition>\n  );\n};\n\nexport default AddElectionCard;\n","import { useEffect, useState } from \"react\";\nimport moment from \"moment\";\nimport ElectionCard from \"./ElectionCard\";\nimport ElectionDetails from \"./ElectionDetails\";\nimport ElectionDialog from \"./ElectionDialog\";\nimport AddElectionCard from \"./AddElectionCard\";\n\nexport const formatDate = (date) => {\n  return date.format(\"DD MMM yyyy HH:MM\");\n};\n\nexport const toDate = (date) => {\n  const timestamp = Math.floor(date / 1000000).toFixed();\n  return moment(timestamp, \"x\");\n};\n\nconst Elections = ({\n  contract,\n  currentUser,\n  nearConfig,\n  wallet,\n  onLoading,\n  onError,\n}) => {\n  const [elections, setElections] = useState();\n  const [shouldReloadElections, setShouldReloadElections] = useState(true);\n  const [selectedElection, setSelectedElection] = useState();\n  const [showElectionDialog, setShowElectionDialog] = useState(false);\n\n  const activateElection = (election) => {\n    localStorage.setItem(\"activeElection\", election.id);\n    setSelectedElection(election);\n  };\n\n  const deactivateElection = () => {\n    localStorage.removeItem(\"activeElection\");\n    setSelectedElection(null);\n  };\n\n  const onElectionAdded = () => {\n    setShouldReloadElections(true);\n  };\n\n  const showAddNewElection = () => {\n    setShowElectionDialog(true);\n  };\n\n  useEffect(() => {\n    if (elections && elections.length > 0) {\n      const electionId = localStorage.getItem(\"activeElection\");\n      elections\n        .filter((e) => `${e.id}` === electionId)\n        .forEach((e) => {\n          setSelectedElection(e);\n        });\n    }\n  }, [elections]);\n\n  useEffect(() => {\n    if (onLoading && shouldReloadElections) {\n      onLoading(true);\n      contract.get_elections().then(\n        (elections) => {\n          onLoading(false);\n          setElections(\n            elections.sort((e1, e2) =>\n              e1.startDate === e2.startDate\n                ? 0\n                : e1.startDate > e2.startDate\n                ? -1\n                : 1\n            )\n          );\n          setShouldReloadElections(false);\n        },\n        (err) => {\n          setShouldReloadElections(false);\n          onLoading(false);\n          onError(`${err.kind[\"ExecutionError\"]}`);\n        }\n      );\n    }\n  }, [contract, onLoading, onError, shouldReloadElections]);\n\n  return (\n    <div className=\"container mx-auto flex-row\">\n      {!selectedElection && (\n        <div className=\"grid lg:grid-cols-4 md:grid-cols-2 xs:grid-cols-1 gap-4\">\n          <AddElectionCard\n            contract={contract}\n            currentUser={currentUser}\n            nearConfig={nearConfig}\n            wallet={wallet}\n            onLoading={onLoading}\n            showAddNewElection={showAddNewElection}\n          />\n          {elections &&\n            elections.map((election, index) => {\n              return (\n                <ElectionCard\n                  key={election.id}\n                  election={election}\n                  index={index}\n                  contract={contract}\n                  currentUser={currentUser}\n                  nearConfig={nearConfig}\n                  wallet={wallet}\n                  onLoading={onLoading}\n                  onElectionSelected={activateElection}\n                />\n              );\n            })}\n        </div>\n      )}\n      {showElectionDialog && (\n        <div className=\"backdrop-filter backdrop-blur-lg mx-auto w-80\">\n          <ElectionDialog\n            contract={contract}\n            currentUser={currentUser}\n            nearConfig={nearConfig}\n            wallet={wallet}\n            onElectionAdded={() => {\n              onElectionAdded();\n              setShowElectionDialog(false);\n            }}\n            onLoading={onLoading}\n            onError={onError}\n            onClose={() => setShowElectionDialog(false)}\n          />\n        </div>\n      )}\n      {selectedElection && (\n        <div className=\"grid grid-cols-1\">\n          <ElectionDetails\n            election={selectedElection}\n            contract={contract}\n            currentUser={currentUser}\n            nearConfig={nearConfig}\n            wallet={wallet}\n            onLoading={onLoading}\n            onError={onError}\n            onClose={deactivateElection}\n          />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Elections;\n","import { Fragment, useState, useEffect } from \"react\";\nimport { useTimeoutFn } from \"react-use\";\nimport { Transition } from \"@headlessui/react\";\nimport { Switch } from \"@headlessui/react\";\n\nconst GodModeToggle = ({\n  contract,\n  currentUser,\n  nearConfig,\n  wallet,\n  onLoading,\n}) => {\n  const [enabled, setEnabled] = useState(false);\n\n  useEffect(() => {\n    if (currentUser) {\n      contract.get_god_mode({ accountId: currentUser.accountId }).then(\n        (mode) => {\n          setEnabled(mode);\n        },\n        (err) => {\n          console.log(err);\n        }\n      );\n    }\n  }, [enabled, contract, currentUser]);\n\n  const switchMode = (isEnabled) => {\n    if (isEnabled) {\n      onLoading(true);\n      contract.god_mode_on({}).then(\n        () => {\n          setEnabled(true);\n          onLoading(false);\n        },\n        (err) => {\n          onLoading(false);\n        }\n      );\n    } else {\n      onLoading(true);\n      contract.god_mode_off({}).then(\n        () => {\n          setEnabled(false);\n          onLoading(false);\n        },\n        (err) => {\n          onLoading(false);\n        }\n      );\n    }\n  };\n\n  return (\n    <div className=\"flex-row content-between\">\n      <span>God mode: </span>\n      <Switch\n        checked={enabled}\n        onChange={switchMode}\n        className={`${\n          enabled ? \"bg-blue-600\" : \"bg-gray-200\"\n        } relative inline-flex items-center h-6 rounded-full w-11`}\n      >\n        <span className=\"sr-only\">God mode</span>\n        <span\n          className={`${\n            enabled ? \"translate-x-6\" : \"translate-x-1\"\n          } inline-block w-4 h-4 transform bg-white rounded-full`}\n        />\n      </Switch>\n    </div>\n  );\n};\n\nconst Authorization = ({\n  contract,\n  currentUser,\n  nearConfig,\n  wallet,\n  onLoading,\n}) => {\n  const signIn = () => {\n    wallet.requestSignIn(nearConfig.contractName, \"NEAR Voting App\");\n  };\n\n  const signOut = () => {\n    wallet.signOut();\n    window.location.replace(window.location.origin + window.location.pathname);\n  };\n\n  let [isShowing, setIsShowing] = useState(true);\n  let [, , resetIsShowing] = useTimeoutFn(() => setIsShowing(true), 500);\n\n  useEffect(() => {\n    resetIsShowing();\n  }, [resetIsShowing]);\n\n  return (\n    <>\n      <Transition\n        as={Fragment}\n        show={isShowing}\n        enter=\"transform transition duration-[500ms]\"\n        enterFrom=\"opacity-0 rotate-[-120deg] scale-50\"\n        enterTo=\"opacity-100 rotate-0 scale-100\"\n        leave=\"transform duration-200 transition ease-in-out\"\n        leaveFrom=\"opacity-100 rotate-0 scale-100 \"\n        leaveTo=\"opacity-0 scale-95 \"\n      >\n        <div className=\"flex justify-between bg-gradient-to-r from-green-400 to-blue-500 mt-6 p-2 mx-auto rounded-xl shadow-md items-center space-x-4\">\n          <img\n            className=\"h-14 w-20\"\n            src=\"https://docs.near.org/img/near_logo.svg\"\n            alt=\"NEAR Logo\"\n          />\n\n          <div\n            className={`text-xl ${\n              currentUser && currentUser.accountId ? \"md:pl-60\" : \"\"\n            } font-medium text-black uppercase`}\n          >\n            Voting is cool 😎\n          </div>\n          <div className=\"flex justify-between\">\n            {currentUser && (\n              <div className=\"mr-8\">\n                <p className=\"text-black-500\">\n                  Account ID: {currentUser.accountId}\n                </p>\n                <GodModeToggle\n                  contract={contract}\n                  currentUser={currentUser}\n                  nearConfig={nearConfig}\n                  wallet={wallet}\n                  onLoading={onLoading}\n                />\n              </div>\n            )}\n            {currentUser ? (\n              <button\n                className=\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded float-right\"\n                onClick={signOut}\n              >\n                Logout\n              </button>\n            ) : (\n              <button\n                className=\"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded float-right\"\n                onClick={signIn}\n              >\n                Login\n              </button>\n            )}\n          </div>\n        </div>\n      </Transition>\n    </>\n  );\n};\n\nexport default Authorization;\n","const LoadingIndicator = ({ isLoading }) => {\n  return (\n    <>\n      {isLoading ? (\n        <div className=\"my-4 mx-auto loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-12 w-12\"></div>\n      ) : (\n        <div className=\"my-4 h-12 w-12\"></div>\n      )}\n    </>\n  );\n};\n\nexport default LoadingIndicator;\n","import { Dialog, Transition } from \"@headlessui/react\";\nimport { Fragment } from \"react\";\n\nexport default function ErrorPopup({ error, callback }) {\n  function closeModal() {\n    callback();\n  }\n\n  return (\n    <>\n      <Transition appear show={error !== \"\"} as={Fragment}>\n        <Dialog\n          as=\"div\"\n          className=\"fixed inset-0 z-10 overflow-y-auto\"\n          onClose={closeModal}\n        >\n          <div className=\"min-h-screen px-4 text-center\">\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0\"\n              enterTo=\"opacity-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100\"\n              leaveTo=\"opacity-0\"\n            >\n              <Dialog.Overlay className=\"fixed inset-0\" />\n            </Transition.Child>\n\n            {/* This element is to trick the browser into centering the modal contents. */}\n            <span\n              className=\"inline-block h-screen align-middle\"\n              aria-hidden=\"true\"\n            >\n              &#8203;\n            </span>\n            <Transition.Child\n              as={Fragment}\n              enter=\"ease-out duration-300\"\n              enterFrom=\"opacity-0 scale-95\"\n              enterTo=\"opacity-100 scale-100\"\n              leave=\"ease-in duration-200\"\n              leaveFrom=\"opacity-100 scale-100\"\n              leaveTo=\"opacity-0 scale-95\"\n            >\n              <div className=\"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl\">\n                <Dialog.Title\n                  as=\"h3\"\n                  className=\"text-lg font-medium leading-6 text-gray-900\"\n                >\n                  Opps, something went wrong\n                </Dialog.Title>\n                <div className=\"mt-2\">\n                  <p className=\"text-sm text-gray-500\">{error}</p>\n                </div>\n\n                <div className=\"mt-4\">\n                  <button\n                    type=\"button\"\n                    className=\"inline-flex justify-center px-4 py-2 text-sm font-medium text-blue-900 bg-blue-100 border border-transparent rounded-md hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-blue-500\"\n                    onClick={closeModal}\n                  >\n                    Close\n                  </button>\n                </div>\n              </div>\n            </Transition.Child>\n          </div>\n        </Dialog>\n      </Transition>\n    </>\n  );\n}\n","import \"regenerator-runtime/runtime\";\nimport React, { useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport Elections from \"./Elections\";\nimport Authorization from \"./Authorization\";\nimport LoadingIndicator from \"./LoadingIndicator\";\nimport ErrorPopup from \"./ErrorPopup\";\n\nconst App = ({ contract, currentUser, nearConfig, wallet }) => {\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n\n  return (\n    <div className=\"container mx-auto\">\n      <Authorization\n        contract={contract}\n        currentUser={currentUser}\n        nearConfig={nearConfig}\n        wallet={wallet}\n        onLoading={setIsLoading}\n      />\n      <ErrorPopup error={error} callback={() => setError(\"\")} />\n      <LoadingIndicator isLoading={isLoading} />\n      {currentUser && (\n        <Elections\n          contract={contract}\n          currentUser={currentUser}\n          nearConfig={nearConfig}\n          wallet={wallet}\n          onLoading={setIsLoading}\n          onError={(err) => setError(err)}\n        />\n      )}\n    </div>\n  );\n};\n\nApp.propTypes = {\n  contract: PropTypes.shape({\n    get_elections: PropTypes.func.isRequired,\n    get_candidates: PropTypes.func.isRequired,\n    get_votes: PropTypes.func.isRequired,\n    get_god_mode: PropTypes.func.isRequired,\n    add_election: PropTypes.func.isRequired,\n    add_candidacy: PropTypes.func.isRequired,\n    add_vote: PropTypes.func.isRequired,\n    god_mode_on: PropTypes.func.isRequired,\n    god_mode_off: PropTypes.func.isRequired,\n  }).isRequired,\n  currentUser: PropTypes.shape({\n    accountId: PropTypes.string.isRequired,\n    balance: PropTypes.string.isRequired,\n  }),\n  nearConfig: PropTypes.shape({\n    contractName: PropTypes.string.isRequired,\n  }).isRequired,\n  wallet: PropTypes.shape({\n    requestSignIn: PropTypes.func.isRequired,\n    signOut: PropTypes.func.isRequired,\n  }).isRequired,\n};\n\nexport default App;\n","// src/index.js\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\nimport getConfig from \"./config.js\";\nimport * as nearAPI from \"near-api-js\";\n\n// Initializing contract\nasync function initContract() {\n  const nearConfig = getConfig(process.env.NODE_ENV || \"testnet\");\n\n  // Initializing connection to the NEAR TestNet\n  const near = await nearAPI.connect({\n    deps: {\n      keyStore: new nearAPI.keyStores.BrowserLocalStorageKeyStore(),\n    },\n    ...nearConfig,\n  });\n\n  // Needed to access wallet\n  const walletConnection = new nearAPI.WalletConnection(near);\n\n  // Load in account data\n  let currentUser;\n  if (walletConnection.getAccountId()) {\n    currentUser = {\n      accountId: walletConnection.getAccountId(),\n      balance: (await walletConnection.account().state()).amount,\n    };\n  }\n\n  // Initializing our contract APIs by contract name and configuration\n  const contract = await new nearAPI.Contract(\n    walletConnection.account(),\n    nearConfig.contractName,\n    {\n      // View methods are read-only – they don't modify the state, but usually return some value\n      viewMethods: [\n        \"get_elections\",\n        \"get_candidates\",\n        \"get_votes\",\n        \"get_god_mode\",\n      ],\n      // Change methods can modify the state, but you don't receive the returned value when called\n      changeMethods: [\n        \"add_election\",\n        \"add_candidacy\",\n        \"add_vote\",\n        \"god_mode_on\",\n        \"god_mode_off\",\n      ],\n      // Sender is the account ID to initialize transactions.\n      // getAccountId() will return empty string if user is still unauthorized\n      sender: walletConnection.getAccountId(),\n    }\n  );\n\n  return { contract, currentUser, nearConfig, walletConnection };\n}\n\nwindow.nearInitPromise = initContract().then(\n  ({ contract, currentUser, nearConfig, walletConnection }) => {\n    ReactDOM.render(\n      <App\n        contract={contract}\n        currentUser={currentUser}\n        nearConfig={nearConfig}\n        wallet={walletConnection}\n      />,\n      document.getElementById(\"root\")\n    );\n  }\n);\n","const CONTRACT_NAME =\n  process.env.CONTRACT_NAME || \"challenge-8.lkskrnk.testnet\";\n\nfunction getConfig(env) {\n  switch (env) {\n    case \"mainnet\":\n      return {\n        networkId: \"mainnet\",\n        nodeUrl: \"https://rpc.mainnet.near.org\",\n        contractName: CONTRACT_NAME,\n        walletUrl: \"https://wallet.near.org\",\n        helperUrl: \"https://helper.mainnet.near.org\",\n      };\n    // This is an example app so production is set to testnet.\n    // You can move production to mainnet if that is applicable.\n    case \"production\":\n    case \"development\":\n    case \"testnet\":\n      return {\n        networkId: \"testnet\",\n        nodeUrl: \"https://rpc.testnet.near.org\",\n        contractName: CONTRACT_NAME,\n        walletUrl: \"https://wallet.testnet.near.org\",\n        helperUrl: \"https://helper.testnet.near.org\",\n      };\n    default:\n      throw Error(\n        `Unconfigured environment '${env}'. Can be configured in src/config.js.`\n      );\n  }\n}\n\nmodule.exports = getConfig;\n"],"sourceRoot":""}